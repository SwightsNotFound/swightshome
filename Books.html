<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=320, initial-scale=1.0">
    <title>Swightshome - Books</title>
    <link rel="icon" href="images/Logonowhite.png" type="image/x-icon">
    <style>
        @font-face {
            font-family: 'Chinacat';
            src: url('fonts/chinacat.ttf') format('truetype');
        }
        @font-face {
            font-family: 'ZenMaruGothic';
            src: url('fonts/ZenMaruGothic-Regular.ttf') format('truetype');
        }
        
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Chinacat', Arial, sans-serif;
            color: white;
            scroll-behavior: smooth;
            overflow-x: hidden;
            background-color: transparent;
        }
        #backdrop {
            position: fixed;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
        }
        
        #main-content {
            flex: 1;
            width: 100%;
            position: relative;
            z-index: 0;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        .header {
            background: url('images/overview-cover.jpg') no-repeat center center/cover;
            padding: 120px 20px 80px;
            text-align: center;
            color: white;
            position: relative;
            z-index: 1;
            animation: fadeIn 1s 0.5s forwards;
            opacity: 0;
            margin-top: 0;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .header .overlay {
            background-color: rgba(0, 0, 0, 0.5);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .header-content {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
        }
        .header-content img {
            width: 150px;
            height: auto;
            border-radius: 50%;
            border: 3px solid #4d8ee6;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .header-content img:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(77, 142, 230, 0.6);
        }
        .header-content h1 {
            font-size: 3em;
            margin: 20px 0;
            color: #4d8ee6;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .header-content p {
            font-size: 1.2em;
            color: #aaa;
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }
        .logo-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .logo-links img {
            width: 40px;
            height: 40px;
            transition: transform 0.3s;
        }
        .logo-links a:hover img {
            transform: scale(1.2);
        }
        .navbar {
            background-color: #23272e;
            min-height: 60px;
            width: 100vw;
            position: sticky;
            top: 0;
            z-index: 999;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 0;
            animation: navbarFadeIn 0.8s 0.2s forwards;
            opacity: 0;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        @keyframes navbarFadeIn {
            from { opacity: 0; transform: translateY(-40px);}
            to { opacity: 1; transform: translateY(0);}
        }
        .navbar-logo-wrap {
            flex: 0 0 auto;
            margin-right: 0;
            padding-left: 0;
            display: flex;
            align-items: center;
            height: 60px;
        }
        .navbar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            margin: 0;
            height: 60px;
            padding-left: 20px;
            padding-right: 25px;
            transition: transform 0.2s;
        }
        .navbar-logo img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #4d8ee6;
        }
        .navbar-logo:hover {
            transform: scale(1.04);
            text-shadow: 0 2px 10px rgba(77,142,230,0.3);
        }
        .navbar-nav {
            position: absolute;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            align-items: center;
            height: 60px;
        }
        .navbar-link {
            color: #4d8ee6;
            text-align: center;
            padding: 12px 20px;
            text-decoration: none;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            border: 2px solid #4d8ee6;
            border-radius: 5px;
            margin: 0 5px;
            background: transparent;
            min-width: 100px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        .navbar-link:hover {
            background-color: #4d8ee6;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(77, 142, 230, 0.3);
        }
        .navbar-link.active {
            background-color: #4d8ee6;
            color: white;
        }
        @media (max-width: 800px) {
            .navbar {
                flex-direction: column;
                align-items: flex-start;
                height: auto;
            }
            .navbar-logo-wrap {
                width: 100%;
                justify-content: flex-start;
                height: 60px;
            }
            .navbar-nav {
                position: static;
                left: auto;
                top: auto;
                transform: none;
                margin-left: 0;
                width: 100%;
                justify-content: flex-start;
                height: auto;
                padding-left: 20px;
                margin-bottom: 6px;
            }
        }
        .content-area {
            padding: 40px 20px;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
            position: relative;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .unavailable-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 235, 59, 0.85);
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #333;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }
        .unavailable-overlay h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #d32f2f;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        .unavailable-overlay p {
            font-size: 1.2rem;
            max-width: 800px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        .books-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        .books-section {
            background-color: rgba(30, 30, 30, 0.7);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(77, 142, 230, 0.3);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: fadeInUp 0.5s forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        .books-section:nth-child(1) { animation-delay: 1.2s; }
        .books-section:nth-child(2) { animation-delay: 1.3s; }
        .books-section:nth-child(3) { animation-delay: 1.4s; }
        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
        .books-section h2 {
            font-size: 1.6rem;
            color: #4d8ee6;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(77, 142, 230, 0.3);
        }
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
        }
        .book-item {
            background-color: rgba(40, 40, 40, 0.6);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(77, 142, 230, 0.2);
            transition: all 0.3s;
            text-align: center;
        }
        .book-item:hover {
            transform: translateY(-3px);
            background-color: rgba(50, 50, 50, 0.8);
            box-shadow: 0 5px 15px rgba(77, 142, 230, 0.2);
            border-color: rgba(77, 142, 230, 0.4);
        }
        .book-item img {
            width: 100%;
            height: auto;
            max-height: 200px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
            transition: transform 0.3s;
        }
        .book-item:hover img {
            transform: scale(1.03);
        }
        .book-item h3 {
            font-size: 1rem;
            color: white;
            margin: 0 0 5px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .book-item .author {
            font-size: 0.85rem;
            color: #aaa;
            margin-bottom: 8px;
        }
        .book-item .details {
            font-size: 0.8rem;
            color: #aaa;
            margin-bottom: 8px;
        }
        .book-item .genres {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            margin-top: 8px;
        }
        .book-item .genre {
            background-color: rgba(77, 142, 230, 0.2);
            color: #4d8ee6;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
        }
        .audiobook-tag {
            background-color: rgba(255, 152, 0, 0.2);
            color: #ff9800;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            display: inline-block;
            margin-top: 5px;
        }

        /* Privacy Policy Styles */
        .privacy-policy, .versions-panel, .credits-panel {
            position: fixed;
            top: 0;
            left: 100%;
            width: 100%;
            height: 100%;
            background-color: rgba(30, 30, 30, 0.95);
            z-index: 2000;
            overflow-y: auto;
            padding: 80px 20px 40px;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .privacy-policy.active, .versions-panel.active, .credits-panel.active {
            transform: translateX(-100%);
        }

        .privacy-policy-content, .versions-content, .credits-content {
            background-color: rgba(40, 40, 40, 0.8);
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.4);
            border: 1px solid rgba(77, 142, 230, 0.2);
        }

        .privacy-policy h1, .versions-panel h1, .credits-panel h1 {
            color: #4d8ee6;
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .privacy-policy p, .versions-panel p, .credits-panel p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .privacy-policy a, .versions-panel a, .credits-panel a {
            color: #4d8ee6;
            text-decoration: none;
            transition: all 0.3s;
        }

        .privacy-policy a:hover, .versions-panel a:hover, .credits-panel a:hover {
            color: #3a7bc8;
            text-decoration: underline;
        }

        .close-privacy, .close-versions, .close-credits {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #4d8ee6;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-privacy:hover, .close-versions:hover, .close-credits:hover {
            background: #3a7bc8;
            transform: rotate(90deg);
        }

        .versions-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .version-item {
            background-color: rgba(50, 50, 50, 0.6);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(77, 142, 230, 0.3);
            transition: all 0.3s;
        }

        .version-item:hover {
            background-color: rgba(60, 60, 60, 0.8);
            border-color: rgba(77, 142, 230, 0.6);
        }

        .version-item h3 {
            margin-top: 0;
            color: #4d8ee6;
        }

        .version-item .download-btn {
            display: inline-block;
            background: #4d8ee6;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .version-item .download-btn:hover {
            background: #3a7bc8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Animation for main content when panels are active */
        .privacy-active #main-content,
        .credits-active #main-content,
        .versions-active #main-content {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        .privacy-active .header,
        .credits-active .header,
        .versions-active .header {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        .privacy-active .navbar,
        .credits-active .navbar,
        .versions-active .navbar {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        .privacy-active .footer,
        .credits-active .footer,
        .versions-active .footer {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        .footer {
            background: rgba(20, 20, 20, 0.9);
            padding: 25px 0;
            text-align: center;
            width: 100%;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 40px;
            animation: fadeIn 0.5s 1.5s forwards;
            opacity: 0;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .footer p {
            margin: 0 0 15px 0;
            font-size: 1rem;
            color: #aaa;
        }
        .footer-links {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .footer-links a {
            color: #4d8ee6;
            text-decoration: none;
            transition: all 0.3s;
            font-weight: bold;
        }
        .footer-links a:hover {
            color: #3a7bc8;
            text-decoration: underline;
        }
        .footer-links span {
            color: #555;
        }
        @media (max-width: 900px) {
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
        }
        @media (max-width: 768px) {
            .header {
                padding: 80px 10px 40px;
            }
            .header-content img {
                width: 100px;
            }
            .header-content h1 {
                font-size: 2.0rem;
            }
            .navbar-logo {
                padding-left: 10px;
                padding-right: 10px;
            }
            .navbar-nav {
                gap: 6px;
            }
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 10px;
            }
            .books-section h2 {
                font-size: 1.4rem;
            }
            .book-item h3 {
                font-size: 0.9rem;
            }
            .book-item .author {
                font-size: 0.8rem;
            }
            .unavailable-overlay h2 {
                font-size: 1.8rem;
            }
            .unavailable-overlay p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <img id="backdrop" src="images/backdrop.jpg" alt="Fullscreen backdrop">
    
    <div id="main-content">
        <!-- Header -->
        <div class="header">
            <div class="overlay"></div>
            <div class="header-content">
                <img src="images/littlelink.png" alt="Logo">
                <h1>Swight</h1>
                <p>An "experimental" script that scrapes my StoryGraph Profile every hour, and this page displays that information.</p>
                <img src="https://count.getloli.com/@Swight?name=Swight&theme=gelbooru&padding=7&offset=0&align=top&scale=1&pixelated=1&darkmode=auto" 
     alt="Moe Counter" 
     style="display: none;">

                <div class="logo-links">
                    <a href="https://app.thestorygraph.com/profile/swight/" target="_blank">
                        <img src="images/storygraph.png" alt="Storygraph Logo">
                    </a>
                </div>
            </div>
        </div>
        <!-- Topbar/Navbar -->
        <div class="navbar">
            <div class="navbar-logo-wrap">
                <a href="https://Swightshome.xyz" class="navbar-logo" onclick="event.preventDefault(); window.location.href='https://Swightshome.xyz';">
                    <img src="images/littlelink.png" alt="Swightshome Logo"> Swightshome
                </a>
            </div>
            <nav class="navbar-nav">
                <a href="Overview" class="navbar-link">Overview</a>
                <a href="Anime" class="navbar-link">Anime</a>
                <a href="Manga" class="navbar-link">Manga</a>
                <a href="Books" class="navbar-link active">Books</a>
            </nav>
        </div>
        <!-- Content Area -->
        <div class="content-area">
            <div class="unavailable-overlay">
                <h2>⚠️ Currently Unavailable</h2>
                <p>The script that powers this page is currently broken. I'm working on fixing it, but in the meantime you can check my book stuff directly on <a href="https://app.thestorygraph.com/profile/swight/" style="color: #4d8ee6; text-decoration: underline;" target="_blank">StoryGraph</a>.</p>
                <p></p>
            </div>
            <div class="books-container">
                <section class="books-section" id="reading">
                    <h2>Currently Reading</h2>
                    <div class="books-grid" id="currently-reading"></div>
                </section>

                <section class="books-section" id="read">
                    <h2>Read</h2>
                    <div class="books-grid" id="read-recently"></div>
                </section>

                <section class="books-section" id="planning">
                    <h2>Planning to Read</h2>
                    <div class="books-grid" id="to-read"></div>
                </section>
            </div>
        </div>
        
        <div class="footer">
            <p>Made with ❤️ by Swight.</p>
            <div class="footer-links">
                <a href="https://status.swightshome.xyz/status/swightshome" target="_blank" role="button">Status Page</a>
                <span>|</span>
                <a href="https://git.swightshome.xyz/Swight/swightshome" target="_blank" role="button">Source Code</a>
                <span>|</span>
                <a href="#" id="privacy-btn" role="button">Privacy Policy</a>
                <span>|</span>
                <a href="#" id="credits-btn" role="button">Credits</a>
                <span>|</span>
                <a href="#" id="versions-btn" role="button">Versions</a>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Panel -->
    <div class="privacy-policy" id="privacy-policy">
        <button class="close-privacy" id="close-privacy">×</button>
        <div class="privacy-policy-content">
            <h1>Privacy Policy</h1>
            <p>If you create an account on any service, only the data you give that service will be stored.</p>
            <p>To recieve all data collected on you, you can ask on one of my <a href="https://swightshome.xyz/#contacts">contacts</a>.</p>
            <h1>No information is shared outside of swightshome.xyz</h1>
            <p>Your information will never be shared with a third party unless requierd to by law.</p>
    
            <h1>Deleting your data</h1>
            <p>You can delete any "identifiable" data, but there is a good chance I won't know who "you" are, so i can't delete that data.</p>
            <p>But if I can, reach out to one of my <a href="https://swightshome.xyz/#contacts">contacts</a> and I'll get your data removed.</p>
        </div>
    </div>

    <!-- Credits Panel -->
    <div class="privacy-policy" id="credits-panel">
        <button class="close-privacy" id="close-credits">×</button>
        <div class="privacy-policy-content">
            <h1>Credits</h1>
            <p>Here are some credits for resources used on this website:</p>
            <ul>
                <li>This website is hosted on GitHub Pages, with all services routed through Cloudflare Tunnels.</li>
                <li>All logos displayed on this site belong to their respective owners. I do not claim ownership of any logos other than my own.</li>
                <li>Chart graphs are thank to <a href="https://www.chartjs.org/" target="_blank">Chart.js</a>.</li>
                <li>Fonts used on this site include: Chinacat by Dogstar (Shareware, © 1998) Zen Maru Gothic (SIL Open Font License, © 2007)</li>
                <li>All anime and manga metadata was taken from Anilist through there public API. All novel and audiobook metadata was scraped from StoryGraph.</li>
                <li>The background of the website features the character Reimu Hakurei from the Touhou Project. Specifically, the background belongs to <a href="https://store.steampowered.com/app/882710/_TouHou_Makuka_Sai__Fantastic_Danmaku_Festival/" target="_blank">this game title</a>.</li>
                <li>Various badges are by <a href="https://anilist.co/forum/thread/15027" target="_blank">Yggdorafuwu</a> and <a href="https://anilist.co/forum/thread/10224" target="_blank">Logia</a>.</li>
            </ul>
            <p>Special thanks to all of the above mentioned! :)</p>
        </div>
    </div>

    <!-- Versions Panel -->
    <div class="privacy-policy" id="versions-panel">
        <button class="close-privacy" id="close-versions">×</button>
        <div class="privacy-policy-content">
            <h1>Website Versions</h1>
            <p></p>
            
            <div class="versions-list">
                <div class="version-item">
                    <h3>Version 3.0 (Current)</h3>
                    <p>The latest version completely reworked from the ground up, anime themed, has lots of animations and is much calmer on the eyes. However the site has been heavily downscaled from 2.0.</p>
                    <a href="https://github.com/SwightsNotFound/swightshome/archive/refs/heads/main.zip" class="download-btn">Download</a>
                </div>
                
                <div class="version-item">
                    <h3>Version 2.0</h3>
                    <p>The most ambitious the site has ever been, made to be completely self-hosted in docker, uses a dark blue and black asthetic. Though in the end it was to much to host on my own.</p>
                    <a href="downloads/swightshome-v2.0.zip" class="download-btn">Download</a>
                </div>
                
                <div class="version-item">
                    <h3>Version 1.0</h3>
                    <p>My first website, and man was it crap, half of its functions where completely borked, but nonetheless it has meaning.</p>
                    <a href="downloads/swightshome-v1.0.zip" class="download-btn">Download</a>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let lastScrollTop = 0;
            const topbar = document.querySelector('.navbar');

            window.addEventListener('scroll', function() {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (scrollTop > lastScrollTop) {
                    topbar.style.transform = 'translateY(-100%)';
                } else {
                    topbar.style.transform = 'translateY(0)';
                }
                lastScrollTop = scrollTop;
            });

            // Function to load books from JSON file
            async function loadBooks() {
                try {
                    const response = await fetch('json/storygraph_list.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    const books = await response.json();

                    const currentlyReading = books.filter(book => book.status === 'Currently reading');
                    const readRecently = books.filter(book => book.status === 'Read recently');
                    const toRead = books.filter(book => book.status === 'To read');

                    displayBooks(currentlyReading, 'currently-reading');
                    displayBooks(readRecently, 'read-recently');
                    displayBooks(toRead, 'to-read');
                    
                    // If books load successfully, hide the unavailable overlay
                    document.querySelector('.unavailable-overlay').style.display = 'none';
                } catch (error) {
                    console.error('Error loading books:', error);
                    // Keep the overlay visible if there's an error
                }
            }

            // Function to display books in the specified section
            function displayBooks(books, sectionId) {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.innerHTML = books.map(book => `
                        <div class="book-item">
                            <img src="${book.coverImage}" alt="${book.title} by ${book.author}" onclick="window.open('${book.url || '#'}', '_blank')">
                            <h3 onclick="window.open('${book.url || '#'}', '_blank')">${book.title}</h3>
                            <p class="author">${book.author}</p>
                            <div class="details">
                                <p>${book.pages}</p>
                                <p>${book.publicationDate}</p>
                                ${book.format === 'Audiobook' ? `<span class="audiobook-tag">Audiobook</span>` : ''}
                            </div>
                            <div class="genres">
                                ${book.genres.slice(0, 3).map(genre => `<span class="genre">${genre}</span>`).join('')}
                            </div>
                        </div>
                    `).join('');
                } else {
                    console.error(`Section with ID '${sectionId}' not found.`);
                }
            }

            // Load books on page load
            loadBooks();

            // --- Footer Panel Functionality ---
            const privacyBtn = document.getElementById('privacy-btn');
            const privacyPanel = document.getElementById('privacy-policy');
            const closePrivacy = document.getElementById('close-privacy');
            const body = document.body;

            // --- Credits Toggle ---
            const creditsBtn = document.getElementById('credits-btn');
            const creditsPanel = document.getElementById('credits-panel');
            const closeCredits = document.getElementById('close-credits');

            // --- Versions Toggle ---
            const versionsBtn = document.getElementById('versions-btn');
            const versionsPanel = document.getElementById('versions-panel');
            const closeVersions = document.getElementById('close-versions');

            function closeAllPanels() {
                body.classList.remove('privacy-active', 'credits-active', 'versions-active');
                privacyPanel.classList.remove('active');
                creditsPanel.classList.remove('active');
                versionsPanel.classList.remove('active');
            }

            privacyBtn.addEventListener('click', function(e) {
                e.preventDefault();
                closeAllPanels();
                body.classList.add('privacy-active');
                privacyPanel.classList.add('active');
            });

            closePrivacy.addEventListener('click', closeAllPanels);

            privacyPanel.addEventListener('click', function(e) {
                if (e.target === privacyPanel) {
                    closeAllPanels();
                }
            });

            creditsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                closeAllPanels();
                body.classList.add('credits-active');
                creditsPanel.classList.add('active');
            });

            closeCredits.addEventListener('click', closeAllPanels);

            creditsPanel.addEventListener('click', function(e) {
                if (e.target === creditsPanel) {
                    closeAllPanels();
                }
            });

            versionsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                closeAllPanels();
                body.classList.add('versions-active');
                versionsPanel.classList.add('active');
            });

            closeVersions.addEventListener('click', closeAllPanels);

            versionsPanel.addEventListener('click', function(e) {
                if (e.target === versionsPanel) {
                    closeAllPanels();
                }
            });

            // Fix downloads on version page - using the exact same method as anime.html
            document.querySelectorAll('.download-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    console.log('Download clicked:', this.href);
                    
                    const url = this.href;
                    const filename = url.split('/').pop();
                    
                    // For external URLs (like GitHub), we need to handle them differently
                    if (url.startsWith('http') && !url.includes(window.location.hostname)) {
                        // External URL - open in new tab for download
                        window.open(url, '_blank');
                    } else {
                        // Internal URL - use the download attribute method
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = filename;
                        a.style.display = 'none';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                    }
                    
                    return false;
                });
            });
            
            // Also prevent clicks inside version items from closing the panel
            document.querySelectorAll('.version-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            });
        });
    </script>
</body>
</html>