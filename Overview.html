<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=320, initial-scale=1.0">
    <title>Swightshome - Overview</title>
    <link rel="icon" href="images/Logonowhite.png" type="image/x-icon">
    <script src="js/chart.js"></script>
    <style>
        @font-face {
            font-family: 'Chinacat';
            src: url('fonts/chinacat.ttf') format('truetype');
        }
        @font-face {
            font-family: 'ZenMaruGothic';
            src: url('fonts/ZenMaruGothic-Regular.ttf') format('truetype');
        }
        
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Chinacat', Arial, sans-serif;
            color: white;
            scroll-behavior: smooth;
            overflow-x: hidden;
            background-color: transparent;
        }
        
        #backdrop {
            position: fixed;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
        }
        
        #main-content {
            flex: 1;
            width: 100%;
            position: relative;
            z-index: 0;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        .header {
            background: url('images/overview-cover.jpg') no-repeat center center/cover;
            padding: 120px 20px 80px;
            text-align: center;
            color: white;
            position: relative;
            z-index: 1;
            animation: fadeIn 1s 0.5s forwards;
            opacity: 0;
            margin-top: 0;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .header .overlay {
            background-color: rgba(0, 0, 0, 0.5);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header-content img {
            width: 150px;
            height: auto;
            border-radius: 50%;
            border: 3px solid #4d8ee6;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .header-content img:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(77, 142, 230, 0.6);
        }
        
        .header-content h1 {
            font-size: 3em;
            margin: 20px 0;
            color: #4d8ee6;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header-content p {
            font-size: 1.2em;
            color: #aaa;
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }
        
        .logo-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .logo-links img {
            width: 40px;
            height: 40px;
            transition: transform 0.3s;
        }
        
        .logo-links a:hover img {
            transform: scale(1.2);
        }
        
        .navbar {
            background-color: #23272e;
            min-height: 60px;
            width: 100vw;
            position: sticky;
            top: 0;
            z-index: 999;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 0;
            animation: navbarFadeIn 0.8s 0.2s forwards;
            opacity: 0;
        }
        
        @keyframes navbarFadeIn {
            from { opacity: 0; transform: translateY(-40px);}
            to { opacity: 1; transform: translateY(0);}
        }
        
        .navbar-logo-wrap {
            flex: 0 0 auto;
            margin-right: 0;
            padding-left: 0;
            display: flex;
            align-items: center;
            height: 60px;
        }
        
        .navbar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            margin: 0;
            height: 60px;
            padding-left: 20px;
            padding-right: 25px;
            transition: transform 0.2s;
        }
        
        .navbar-logo img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #4d8ee6;
        }
        
        .navbar-logo:hover {
            transform: scale(1.04);
            text-shadow: 0 2px 10px rgba(77,142,230,0.3);
        }
        
        .navbar-nav {
            position: absolute;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            align-items: center;
            height: 60px;
        }
        
        .navbar-link {
            color: #4d8ee6;
            text-align: center;
            padding: 12px 20px;
            text-decoration: none;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            border: 2px solid #4d8ee6;
            border-radius: 5px;
            margin: 0 5px;
            background: transparent;
            min-width: 100px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        
        .navbar-link:hover {
            background-color: #4d8ee6;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(77, 142, 230, 0.3);
        }
        
        .navbar-link.active {
            background-color: #4d8ee6;
            color: white;
        }
        
        @media (max-width: 800px) {
            .navbar {
                flex-direction: column;
                align-items: flex-start;
                height: auto;
            }
            .navbar-logo-wrap {
                width: 100%;
                justify-content: flex-start;
                height: 60px;
            }
            .navbar-nav {
                position: static;
                left: auto;
                top: auto;
                transform: none;
                margin-left: 0;
                width: 100%;
                justify-content: flex-start;
                height: auto;
                padding-left: 20px;
                margin-bottom: 6px;
            }
        }
        
        .content-area {
            padding: 40px 20px;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
        }
        
        .centered-true-flex-row {
            display: grid;
            grid-template-columns: 1fr minmax(340px, 540px) 1fr;
            gap: 30px;
            align-items: flex-start;
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
            position: relative;
        }
        
        .left-column, .right-column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .left-column {
            justify-self: end;
            max-width: 350px;
            min-width: 250px;
            width: 100%;
        }
        
        .center-column {
            justify-self: center;
            min-width: 340px;
            max-width: 540px;
            width: 100%;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .right-column {
            justify-self: start;
            max-width: 500px;
            min-width: 440px;
            width: 100%;
        }
        
        .profile-description-section,
        .stats-section,
        .bar-chart-container,
        .activity-section,
        .favorites-section {
            background-color: rgba(30, 30, 30, 0.7);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(77, 142, 230, 0.3);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: fadeInUp 0.5s forwards;
            opacity: 0;
            transform: translateY(20px);
            width: 100%;
            box-sizing: border-box;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 20px;
        }
        
        .stats-section, .profile-description-section, .bar-chart-container {
            max-width: 400px;
        }
        
        .activity-section {
            max-width: 540px;
        }
        
        .favorites-section {
            width: 480px;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
        
        .profile-description-section { animation-delay: 1.2s; }
        .stats-section:nth-of-type(1) { animation-delay: 1.3s; }
        .stats-section:nth-of-type(2) { animation-delay: 1.4s; }
        .stats-section:nth-of-type(3) { animation-delay: 1.5s; }
        .bar-chart-container { animation-delay: 1.6s; }
        .activity-section { animation-delay: 1.7s; }
        .favorites-section:nth-of-type(1) { animation-delay: 1.8s; }
        .favorites-section:nth-of-type(2) { animation-delay: 1.9s; }
        .favorites-section:nth-of-type(3) { animation-delay: 2.0s; }
        .favorites-section:nth-of-type(4) { animation-delay: 2.1s; }
        
        .stats-section h2, .profile-description-section h2, 
        .bar-chart-container h2, .activity-section h2, .favorites-section h2 {
            font-size: 1.6rem;
            color: #4d8ee6;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(77, 142, 230, 0.3);
            padding-bottom: 10px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 1.05rem;
        }
        
        .stat-item span:first-child { color: #aaa; }
        .stat-item span:last-child { color: white; font-weight: bold; }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .image-grid img {
            width: 100%;
            border-radius: 5px;
            transition: transform 0.3s;
        }
        
        .image-grid img:hover { transform: scale(1.03); }
        
        /* ORIGINAL ACTIVITY HISTORY GRAPH STYLING */
        .down-heatmap-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin: 0 auto;
        }
        
        .down-heatmap {
            display: grid;
            grid-template-columns: repeat(7, 1fr); /* 7 days horizontally */
            grid-template-rows: repeat(52, 1fr);   /* 52 weeks vertically */
            gap: 2px;
            width: 140px;   /* wider for readability */
            min-width: 100px;
            max-width: 180px;
            height: 520px;  /* tall for all weeks */
            max-height: 520px;
            min-height: 400px;
            align-items: center;
            justify-items: center;
            background: none;
        }
        
        .down-day {
            width: 16px;
            height: 8px;
            background-color: rgba(77, 142, 230, 0.08);
            border-radius: 2px;
            transition: all 0.2s;
            box-sizing: border-box;
        }
        
        .down-day[data-activity="1"] { background-color: #b4d0f8; }
        .down-day[data-activity="2"] { background-color: #5fa8e8; }
        .down-day[data-activity="3"] { background-color: #397ddb; }
        .down-day[data-activity="4"] { background-color: #174b8a; }
        
        .down-day:hover {
            transform: scale(1.6);
            box-shadow: 0 0 12px #397ddb77;
            z-index: 2;
        }
        
        .down-heatmap-labels, .down-heatmap-legend {
            display: none !important;
        }
        
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }
        
        .activity-item {
            display: flex;
            background-color: rgba(40, 40, 40, 0.6);
            border-radius: 8px;
            padding: 6px 8px;
            border: 1px solid rgba(77, 142, 230, 0.2);
            transition: all 0.3s;
            align-items: flex-start;
        }
        
        .activity-item:hover {
            transform: translateY(-2px);
            background-color: rgba(50, 50, 50, 0.8);
            box-shadow: 0 2px 7px rgba(0,0,0,0.25);
            border-color: rgba(77, 142, 230, 0.4);
        }
        
        .activity-cover {
            width: 32px;
            height: 46px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 8px;
            transition: transform 0.3s;
            flex-shrink: 0;
        }
        
        .activity-item:hover .activity-cover {
            transform: scale(1.05);
        }
        
        .activity-details {
            flex: 1;
            min-width: 0;
        }
        
        .activity-title {
            font-size: 0.87rem;
            color: white;
            margin-bottom: 2px;
            cursor: pointer;
            transition: color 0.3s;
            line-height: 1.1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .activity-item:hover .activity-title {
            color: #4d8ee6;
        }
        
        .activity-meta {
            font-size: 0.74rem;
            color: #aaa;
            margin-bottom: 2px;
            line-height: 1.1;
        }
        
        .activity-time {
            font-size: 0.64rem;
            color: #777;
            line-height: 1.1;
        }
        
        #loadMoreBtn {
            background-color: rgba(77, 142, 230, 0.2);
            color: white;
            border: 1px solid #4d8ee6;
            padding: 7px 13px;
            border-radius: 5px;
            font-weight: bold;
            margin: 13px auto 0 auto;
            display: block;
            transition: all 0.3s;
            opacity: 0;
            animation: fadeIn 0.5s 2.2s forwards;
        }
        
        #loadMoreBtn:hover {
            background-color: #4d8ee6;
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(77, 142, 230, 0.3);
        }
        
        .favorites-list {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px 10px;
            justify-items: center;
            align-items: start;
            width: 100%;
            margin: 0 auto;
        }
        
        .favorite-item {
            width: 72px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.3s;
            margin-bottom: 8px;
        }
        
        .favorite-item:hover {
            transform: translateY(-5px);
        }
        
        .favorite-cover {
            width: 72px;
            height: 102px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 6px;
            transition: transform 0.3s;
        }
        
        .favorite-item:hover .favorite-cover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(77, 142, 230, 0.3);
        }
        
        .favorite-title {
            font-size: 0.82rem;
            color: white;
            margin-bottom: 2px;
            cursor: pointer;
            transition: color 0.3s;
            line-height: 1.1;
            max-width: 100%;
            word-break: break-word;
            white-space: normal;
        }
        
        .favorite-item:hover .favorite-title {
            color: #4d8ee6;
        }
        
        .favorite-meta {
            font-size: 0.66rem;
            color: #aaa;
            line-height: 1.1;
            max-width: 100%;
            word-break: break-word;
            margin-bottom: 1px;
        }
        
        .footer {
            background: rgba(20, 20, 20, 0.9);
            padding: 25px 0;
            text-align: center;
            width: 100%;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 40px;
            animation: fadeIn 0.5s 2.3s forwards;
            opacity: 0;
        }
        
        .footer p {
            margin: 0 0 15px 0;
            font-size: 1rem;
            color: #aaa;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: #4d8ee6;
            text-decoration: none;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .footer-links a:hover {
            color: #3a7bc8;
            text-decoration: underline;
        }
        
        .footer-links span {
            color: #555;
        }
        
        /* Privacy Policy Styles */
        .privacy-policy, .versions-panel, .credits-panel {
            position: fixed;
            top: 0;
            left: 100%;
            width: 100%;
            height: 100%;
            background-color: rgba(30, 30, 30, 0.95);
            z-index: 2000;
            overflow-y: auto;
            padding: 80px 20px 40px;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .privacy-policy.active, .versions-panel.active, .credits-panel.active {
            transform: translateX(-100%);
        }

        .privacy-policy-content, .versions-content, .credits-content {
            background-color: rgba(40, 40, 40, 0.8);
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.4);
            border: 1px solid rgba(77, 142, 230, 0.2);
        }

        .privacy-policy h1, .versions-panel h1, .credits-panel h1 {
            color: #4d8ee6;
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .privacy-policy p, .versions-panel p, .credits-panel p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .privacy-policy a, .versions-panel a, .credits-panel a {
            color: #4d8ee6;
            text-decoration: none;
            transition: all 0.3s;
        }

        .privacy-policy a:hover, .versions-panel a:hover, .credits-panel a:hover {
            color: #3a7bc8;
            text-decoration: underline;
        }

        .close-privacy, .close-versions, .close-credits {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #4d8ee6;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-privacy:hover, .close-versions:hover, .close-credits:hover {
            background: #3a7bc8;
            transform: rotate(90deg);
        }

        .versions-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .version-item {
            background-color: rgba(50, 50, 50, 0.6);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(77, 142, 230, 0.3);
            transition: all 0.3s;
        }

        .version-item:hover {
            background-color: rgba(60, 60, 60, 0.8);
            border-color: rgba(77, 142, 230, 0.6);
        }

        .version-item h3 {
            margin-top: 0;
            color: #4d8ee6;
        }

        .version-item .download-btn {
            display: inline-block;
            background: #4d8ee6;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .version-item .download-btn:hover {
            background: #3a7bc8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Animation for main content when panels are active */
        .privacy-active #main-content,
        .credits-active #main-content,
        .versions-active #main-content {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        .privacy-active .header,
        .credits-active .header,
        .versions-active .header {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        .privacy-active .navbar,
        .credits-active .navbar,
        .versions-active .navbar {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        .privacy-active .footer,
        .credits-active .footer,
        .versions-active .footer {
            transform: translateX(-100%);
            filter: blur(2px);
            opacity: 0.7;
        }

        @media (max-width: 1400px) {
            .centered-true-flex-row {
                max-width: 100vw;
            }
            .right-column {
                min-width: 350px;
                max-width: 350px;
            }
            .favorites-section {
                min-width: 320px;
                max-width: 350px;
            }
        }
        
        @media (max-width: 1200px) {
            .centered-true-flex-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .left-column, .right-column, .center-column {
                max-width: 100%;
                width: 100%;
                align-items: center;
            }
        }
        
        @media (max-width: 900px) {
            .centered-true-flex-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .left-column, .right-column, .center-column {
                max-width: 100%;
                width: 100%;
                align-items: center;
            }
            .favorites-list {
                grid-template-columns: repeat(3, 1fr);
            }
            .down-heatmap { width: 110px; height: 360px; }
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 80px 10px 40px;
            }
            .header-content img {
                width: 100px;
            }
            .header-content h1 {
                font-size: 2.0rem;
            }
            .navbar-logo {
                padding-left: 10px;
                padding-right: 10px;
            }
            .navbar-nav {
                gap: 6px;
            }
            .centered-true-flex-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .left-column, .right-column, .center-column {
                max-width: 100%;
                width: 100%;
                align-items: center;
            }
            .favorites-list {
                grid-template-columns: repeat(2, 1fr);
            }
            .favorites-section {
                width: 100%;
                min-width: unset;
            }
            .down-heatmap { width: 85px; height: 220px; }
        }
    </style>
</head>
<body>
    <img id="backdrop" src="images/backdrop.jpg" alt="Fullscreen backdrop">
    
    <div id="main-content">
        <!-- Header -->
        <div class="header">
            <div class="overlay"></div>
            <div class="header-content">
                <img src="images/littlelink.png" alt="Logo">
                <h1>Swight</h1>
                <p>A group of scipts I made for fun that fetch information from both my Anilist and StoryGraph profiles, stores that information in JSON files, and then displays that information fancily.</p>
                <div class="logo-links">
                    <a href="https://anilist.co/user/Swight/" target="_blank">
                        <img src="images/AniList.svg.png" alt="Anilist Logo">
                    </a>
                    <a href="https://myanimelist.net/profile/SwightUnkown" target="_blank">
                        <img src="images/myanimelist.png" alt="MyAnimeList Logo">
                    </a>
                    <a href="https://kitsu.app/users/Swight" target="_blank">
                        <img src="images/kitsu.png" alt="Kitsu Logo">
                    </a>
                    <a href="https://app.thestorygraph.com/profile/swight" target="_blank">
                        <img src="images/storygraph.png" alt="Storygraph Logo">
                    </a>
                </div>
            </div>
        </div>
        <!-- Topbar/Navbar -->
        <div class="navbar">
            <div class="navbar-logo-wrap">
                <a href="https://Swightshome.xyz" class="navbar-logo" onclick="event.preventDefault(); window.location.href='https://Swightshome.xyz';">
                    <img src="images/littlelink.png" alt="Swightshome Logo"> Swightshome
                </a>
            </div>
            <nav class="navbar-nav">
                <a href="Overview" class="navbar-link active">Overview</a>
                <a href="Anime" class="navbar-link">Anime</a>
                <a href="Manga" class="navbar-link">Manga</a>
                <a href="Books" class="navbar-link">Books</a>
            </nav>
        </div>
        <!-- Content Area: TRUE CENTER layout with grid -->
        <div class="content-area">
            <div class="centered-true-flex-row">
                <!-- LEFT COLUMN: STATS AND GRAPHS -->
                <div class="left-column">
                    <div class="profile-description-section">
                        <h2>Feats</h2>
                        <div class="image-grid">
                            <img src="images/completedanime.png" alt="Completed Anime">
                            <img src="images/episodes.png" alt="Episodes Watched">
                            <img src="images/totalmovie.png" alt="Total Movies">
                            <img src="images/readchapters.png" alt="Chapters Read">
                        </div>
                        <img src="https://count.getloli.com/@Swight"
           alt="Moe Counter for Swight"
           style="display: block; margin: 20px auto;">
                        <p style="text-align: center; color: #aaa; font-size: 0.9rem;">Badges by <a href="https://anilist.co/forum/thread/15027" style="color: #4d8ee6;">Yggdorafuwu</a> and <a href="https://anilist.co/forum/thread/10224" style="color: #4d8ee6;">Logia</a>.</p>
                    </div>
                    <div class="stats-section">
                        <h2>Anime Stats</h2>
                        <div class="stat-item"><span>Count:</span><span id="anime-count">Loading...</span></div>
                        <div class="stat-item"><span>Mean Score:</span><span id="anime-meanScore">Loading...</span></div>
                        <div class="stat-item"><span>Days Watched:</span><span id="anime-daysWatched">Loading...</span></div>
                        <div class="stat-item"><span>Episodes Watched:</span><span id="anime-episodesWatched">Loading...</span></div>
                    </div>
                    <div class="stats-section">
                        <h2>Manga Stats</h2>
                        <div class="stat-item"><span>Count:</span><span id="manga-count">Loading...</span></div>
                        <div class="stat-item"><span>Mean Score:</span><span id="manga-meanScore">Loading...</span></div>
                        <div class="stat-item"><span>Chapters Read:</span><span id="manga-chaptersRead">Loading...</span></div>
                        <div class="stat-item"><span>Volumes Read:</span><span id="manga-volumesRead">Loading...</span></div>
                    </div>
                    <div class="stats-section">
                        <h2>Book Stats</h2>
                        <div class="stat-item"><span>Books Read:</span><span id="books-read">Loading...</span></div>
                        <div class="stat-item"><span>Pages Read:</span><span id="pages-read">Loading...</span></div>
                        <div class="stat-item"><span>Minutes Listened:</span><span id="minutes-listened">Loading...</span></div>
                    </div>
                    <div class="stats-section">
                        <h2>Activity History</h2>
                        <div class="down-heatmap-wrap">
                            <div class="down-heatmap" id="downHeatmap"></div>
                        </div>
                    </div>
                    <div class="bar-chart-container">
                        <h2>Genres</h2>
                        <div id="top-genres"></div>
                        <canvas id="genreChart"></canvas>
                    </div>
                </div>
                <!-- CENTER COLUMN: RECENT ACTIVITIES -->
                <div class="center-column">
                    <div class="activity-section">
                        <h2>Recent Activities</h2>
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <div class="activity-details">
                                    <p class="activity-meta">Loading activities...</p>
                                </div>
                            </div>
                        </div>
                        <button id="loadMoreBtn">Load More</button>
                    </div>
                </div>
                <!-- RIGHT COLUMN: FAVORITES -->
                <div class="right-column">
                    <div class="favorites-section">
                        <h2>Favorite Anime</h2>
                        <div id="anime-favorites" class="favorites-list">Loading...</div>
                    </div>
                    <div class="favorites-section">
                        <h2>Favorite Manga</h2>
                        <div id="manga-favorites" class="favorites-list">Loading...</div>
                    </div>
                    <div class="favorites-section">
                        <h2>Favorite Characters</h2>
                        <div id="character-favorites" class="favorites-list">Loading...</div>
                    </div>
                    <div class="favorites-section">
                        <h2>Favorite Staff</h2>
                        <div id="staff-favorites" class="favorites-list">Loading...</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <p>Made with ❤️ by Swight.</p>
            <div class="footer-links">
                <a href="https://status.swightshome.xyz/status/swightshome" target="_blank" role="button">Status Page</a>
                <span>|</span>
                <a href="https://git.swightshome.xyz/Swight/swightshome" target="_blank" role="button">Source Code</a>
                <span>|</span>
                <a href="#" id="privacy-btn" role="button">Privacy Policy</a>
                <span>|</span>
                <a href="#" id="credits-btn" role="button">Credits</a>
                <span>|</span>
                <a href="#" id="versions-btn" role="button">Versions</a>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Panel -->
    <div class="privacy-policy" id="privacy-policy">
        <button class="close-privacy" id="close-privacy">×</button>
        <div class="privacy-policy-content">
            <h1>Privacy Policy</h1>
            <p>If you create an account on any service, only the data you give that service will be stored.</p>
            <p>To recieve all data collected on you, you can ask on one of my <a href="https://swightshome.xyz/#contacts">contacts</a>.</p>
            <h1>No information is shared outside of swightshome.xyz</h1>
            <p>Your information will never be shared with a third party unless requierd to by law.</p>
    
            <h1>Deleting your data</h1>
            <p>You can delete any "identifiable" data, but there is a good chance I won't know who "you" are, so i can't delete that data.</p>
            <p>But if I can, reach out to one of my <a href="https://swightshome.xyz/#contacts">contacts</a> and I'll get your data removed.</p>
        </div>
    </div>

    <!-- Credits Panel -->
    <div class="privacy-policy" id="credits-panel">
        <button class="close-privacy" id="close-credits">×</button>
        <div class="privacy-policy-content">
            <h1>Credits</h1>
            <p>Here are some credits for resources used on this website:</p>
            <ul>
                <li>This website is hosted on GitHub Pages, with all services routed through Cloudflare Tunnels.</li>
                <li>All logos displayed on this site belong to their respective owners. I do not claim ownership of any logos other than my own.</li>
                <li>Chart graphs are thank to <a href="https://www.chartjs.org/" target="_blank">Chart.js</a>.</li>
                <li>Fonts used on this site include: Chinacat by Dogstar (Shareware, © 1998) Zen Maru Gothic (SIL Open Font License, © 2007)</li>
                <li>All anime and manga metadata was taken from Anilist through there public API. All novel and audiobook metadata was scraped from StoryGraph.</li>
                <li>The background of the website features the character Reimu Hakurei from the Touhou Project. Specifically, the background belongs to <a href="https://store.steampowered.com/app/882710/_TouHou_Makuka_Sai__Fantastic_Danmaku_Festival/" target="_blank">this game title</a>.</li>
                <li>Various badges are by <a href="https://anilist.co/forum/thread/15027" target="_blank">Yggdorafuwu</a> and <a href="https://anilist.co/forum/thread/10224" target="_blank">Logia</a>.</li>
            </ul>
            <p>Special thanks to all of the above mentioned! :)</p>
        </div>
    </div>

    <!-- Versions Panel -->
    <div class="privacy-policy" id="versions-panel">
        <button class="close-privacy" id="close-versions">×</button>
        <div class="privacy-policy-content">
            <h1>Website Versions</h1>
            <p></p>
            
            <div class="versions-list">
                <div class="version-item">
                    <h3>Version 3.0 (Current)</h3>
                    <p>The latest version completely reworked from the ground up, anime themed, has lots of animations and is much calmer on the eyes. However the site has been heavily downscaled from 2.0.</p>
                    <a href="https://github.com/SwightsNotFound/swightshome/archive/refs/heads/main.zip" class="download-btn">Download</a>
                </div>
                
                <div class="version-item">
                    <h3>Version 2.0</h3>
                    <p>The most ambitious the site has ever been, made to be completely self-hosted in docker, uses a dark blue and black asthetic. Though in the end it was to much to host on my own.</p>
                    <a href="downloads/swightshome-v2.0.zip" class="download-btn">Download</a>
                </div>
                
                <div class="version-item">
                    <h3>Version 1.0</h3>
                    <p>My first website, and man was it crap, half of its functions where completely borked, but nonetheless it has meaning.</p>
                    <a href="downloads/swightshome-v1.0.zip" class="download-btn">Download</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let allActivities = [];
            let activitiesToShow = 25;
            const activitiesPerLoad = 10;
            const excludedStatuses = [
                "paused watching", "paused reading", "dropped",
                "plans to read", "plans to watch"
            ];
            
            // --- ORIGINAL DOWNWARD ACTIVITY HISTORY GRAPH LOGIC ---
            fetch('json/activityHistory.json')
                .then(response => response.json())
                .then(activityData => {
                    // 52 weeks x 7 days = 364 days (full year)
                    const currentDate = new Date();
                    const days = [];
                    for (let i = 0; i < 364; i++) {
                        const d = new Date(currentDate);
                        d.setDate(d.getDate() - (363 - i));
                        days.push(d);
                    }
                    
                    // Prepare 2D array: [row][col] = activity level -- row=week (vertical), col=day (Mon-Sun)
                    const grid = Array.from({ length: 52 }, () => Array(7).fill({level:0, count:0, date:""}));
                    for (let i = 0; i < days.length; i++) {
                        const week = Math.floor(i / 7); // row index (vertical)
                        const dayOfWeek = days[i].getDay(); // 0 (Sun) - 6 (Sat)
                        const col = (dayOfWeek + 6) % 7; // Monday=0, Sunday=6 (horizontal col index)
                        const dateString = days[i].toISOString().split('T')[0];
                        const acts = (activityData[dateString] || []).filter(a =>
                            !excludedStatuses.includes((a.status || "").toLowerCase())
                        );
                        let level = 0;
                        if (acts.length > 0) level = 1;
                        if (acts.length > 2) level = 2;
                        if (acts.length > 5) level = 3;
                        if (acts.length > 10) level = 4;
                        grid[week][col] = { level, count: acts.length, date: dateString };
                    }
                    
                    // Render downwards: columns = days (Mon-Sun), rows = weeks (oldest at top)
                    const container = document.getElementById('downHeatmap');
                    container.innerHTML = '';
                    for (let week = 0; week < 52; week++) {
                        for (let col = 0; col < 7; col++) {
                            const cell = grid[week][col];
                            const div = document.createElement('div');
                            div.className = 'down-day';
                            div.dataset.activity = cell.level;
                            div.title = `${cell.date}: ${cell.count} activities`;
                            container.appendChild(div);
                        }
                    }
                    
                    // Prepare allActivities for recent activity list: latest first
                    const reversedDays = [...days].reverse();
                    reversedDays.forEach(d => {
                        const dateString = d.toISOString().split('T')[0];
                        const acts = (activityData[dateString] || []).filter(a =>
                            !excludedStatuses.includes((a.status || "").toLowerCase())
                        );
                        allActivities.push(...acts);
                    });
                    
                    allActivities.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));
                    displayActivities();
                })
                .catch(error => {
                    const container = document.getElementById('downHeatmap');
                    if (container) container.innerHTML = '';
                    console.error('Error loading activity data:', error);
                });

            function displayActivities() {
                const activityList = document.getElementById('activityList');
                activityList.innerHTML = '';
                const activitiesToDisplay = allActivities.slice(0, activitiesToShow);
                if (activitiesToDisplay.length === 0) {
                    activityList.innerHTML = '<div class="activity-item"><div class="activity-details"><p class="activity-meta">No activities found</p></div></div>';
                    return;
                }
                activitiesToDisplay.forEach(activity => {
                    const activityDiv = document.createElement('div');
                    activityDiv.className = 'activity-item';
                    const title = activity.media?.title?.english || activity.media?.title?.romaji || 'No title available';
                    const cover = activity.media?.coverImage?.large || 'default-cover.jpg';
                    const progress = activity.progress ? `Episode ${activity.progress}` : '';
                    let time = '';
                    if (activity.createdAt) {
                        try {
                            time = new Date(activity.createdAt * 1000).toLocaleString('en-US', { timeZone: 'America/Chicago' });
                        } catch (e) { time = ''; }
                    }
                    const siteUrl = activity.media?.siteUrl || '#';
                    activityDiv.innerHTML = `
                        <img src="${cover}" alt="${title}" class="activity-cover" onclick="window.open('${siteUrl}', '_blank')">
                        <div class="activity-details">
                            <p class="activity-title" onclick="window.open('${siteUrl}', '_blank')">${title}</p>
                            <p class="activity-meta">${progress}</p>
                            <p class="activity-time">${time}</p>
                        </div>
                    `;
                    activityList.appendChild(activityDiv);
                });
            }
            
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', () => {
                    activitiesToShow += activitiesPerLoad;
                    displayActivities();
                });
            }
            
            fetch('json/stats.json')
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                    return response.json();
                })
                .then(data => {
                    if (data && data.data && data.data.User && data.data.User.statistics) {
                        const animeStats = data.data.User.statistics.anime;
                        const mangaStats = data.data.User.statistics.manga;
                        document.getElementById('anime-count').textContent = animeStats.count;
                        document.getElementById('anime-meanScore').textContent = animeStats.meanScore;
                        const daysWatched = (animeStats.minutesWatched / 60 / 24).toFixed(2);
                        document.getElementById('anime-daysWatched').textContent = daysWatched;
                        document.getElementById('anime-episodesWatched').textContent = animeStats.episodesWatched;
                        document.getElementById('manga-count').textContent = mangaStats.count;
                        document.getElementById('manga-meanScore').textContent = mangaStats.meanScore;
                        document.getElementById('manga-chaptersRead').textContent = mangaStats.chaptersRead;
                        document.getElementById('manga-volumesRead').textContent = mangaStats.volumesRead;
                    }
                })
                .catch(error => console.error('Error fetching stats:', error));

            fetch('json/storygraph_stats.json')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('books-read').textContent = data.totalBooksRead;
                    document.getElementById('pages-read').textContent = data.totalPagesRead;
                    document.getElementById('minutes-listened').textContent = data.totalMinutesListened;
                })
                .catch(error => console.error('Error loading book stats:', error));

            fetch('json/genreOverview.json')
                .then(response => response.json())
                .then(data => {
                    const genres = data.anime.genres;
                    const genreColorMap = {
                        "Drama": "#b56576",
                        "Comedy": "#f4d35e",
                        "Romance": "#e07a5f",
                        "Action": "#3a86ff",
                        "Fantasy": "#8ac926",
                        "Slice of Life": "#f7b267",
                        "Supernatural": "#9d4edd",
                        "Adventure": "#43aa8b",
                        "Mystery": "#22223b",
                        "Psychological": "#495867",
                        "Sci-Fi": "#118ab2",
                        "Ecchi": "#ef476f",
                        "Thriller": "#1b1b1e",
                        "Sports": "#06d6a0",
                        "Music": "#ffd166",
                        "Horror": "#e63946",
                        "Mahou Shoujo": "#ffb7b2"
                    };
                    const genreColors = genres.map(g => genreColorMap[g.genre] || "#888");
                    const topGenres = genres.sort((a, b) => b.count - a.count).slice(0, 5);
                    const topGenresContainer = document.getElementById('top-genres');
                    if (topGenresContainer) {
                        topGenresContainer.innerHTML = '<h3>Top 5 Genres</h3>';
                        topGenres.forEach(genre => {
                            const genreDiv = document.createElement('div');
                            genreDiv.textContent = `${genre.genre}: ${genre.count}`;
                            topGenresContainer.appendChild(genreDiv);
                        });
                    }
                    const ctx = document.getElementById('genreChart')?.getContext('2d');
                    if (ctx) {
                        const chartData = {
                            labels: genres.map(genre => genre.genre),
                            datasets: [{
                                label: 'Count',
                                data: genres.map(genre => genre.count),
                                backgroundColor: genreColors
                            }]
                        };
                        new Chart(ctx, {
                            type: 'bar',
                            data: chartData,
                            options: {
                                responsive: true,
                                indexAxis: 'y',
                                plugins: {
                                    legend: { display: false }
                                },
                                scales: {
                                    y: {
                                        ticks: { color: '#aaa' },
                                        grid: { color: 'rgba(255,255,255,0.1)' }
                                    },
                                    x: {
                                        beginAtZero: true,
                                        ticks: { color: '#aaa' },
                                        grid: { color: 'rgba(255,255,255,0.1)' }
                                    }
                                }
                            }
                        });
                    }
                })
                .catch(error => console.error('Error loading genre overview:', error));
                
            fetch('json/favorites.json')
                .then(response => response.json())
                .then(data => {
                    displayFavorites(data.anime.nodes, 'anime-favorites', 'title', 'coverImage', 'siteUrl');
                    displayFavorites(data.manga.nodes, 'manga-favorites', 'title', 'coverImage', 'siteUrl');
                    displayFavorites(data.characters.nodes, 'character-favorites', 'name', 'image', 'siteUrl');
                    displayFavorites(data.staff.nodes, 'staff-favorites', 'name', 'image', 'siteUrl');
                })
                .catch(error => console.error('Error loading favorites:', error));
                
            function displayFavorites(favorites, containerId, titleKey, imageKey, urlKey) {
                const container = document.getElementById(containerId);
                if (!container) return;
                container.innerHTML = '';
                favorites.forEach(favorite => {
                    const favoriteDiv = document.createElement('div');
                    favoriteDiv.className = 'favorite-item';
                    const title = favorite[titleKey]?.english || favorite[titleKey]?.romaji || favorite[titleKey]?.full || favorite[titleKey];
                    const subtitle = favorite[titleKey]?.romaji || favorite[titleKey]?.native || '';
                    const cover = favorite[imageKey]?.large || favorite[imageKey]?.medium || 'default-cover.jpg';
                    const url = favorite[urlKey];
                    favoriteDiv.innerHTML = `
                        <img src="${cover}" alt="${title}" class="favorite-cover" onclick="window.open('${url}', '_blank')">
                        <p class="favorite-title" onclick="window.open('${url}', '_blank')">${title}</p>
                        <p class="favorite-meta">${subtitle}</p>
                    `;
                    container.appendChild(favoriteDiv);
                });
            }

            // --- Footer Panel Functionality ---
            const privacyBtn = document.getElementById('privacy-btn');
            const privacyPanel = document.getElementById('privacy-policy');
            const closePrivacy = document.getElementById('close-privacy');
            const mainContent = document.getElementById('main-content');
            const header = document.querySelector('.header');
            const navbar = document.querySelector('.navbar');
            const footer = document.querySelector('.footer');

            function closeAllPanels() {
                document.body.classList.remove('privacy-active', 'credits-active', 'versions-active');
                privacyPanel.classList.remove('active');
                creditsPanel.classList.remove('active');
                versionsPanel.classList.remove('active');
            }

            privacyBtn.addEventListener('click', function(e) {
                e.preventDefault();
                closeAllPanels();
                document.body.classList.add('privacy-active');
                privacyPanel.classList.add('active');
            });

            closePrivacy.addEventListener('click', closeAllPanels);

            privacyPanel.addEventListener('click', function(e) {
                if (e.target === privacyPanel) {
                    closeAllPanels();
                }
            });

            // --- Credits Toggle ---
            const creditsBtn = document.getElementById('credits-btn');
            const creditsPanel = document.getElementById('credits-panel');
            const closeCredits = document.getElementById('close-credits');

            creditsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                closeAllPanels();
                document.body.classList.add('credits-active');
                creditsPanel.classList.add('active');
            });

            closeCredits.addEventListener('click', closeAllPanels);

            creditsPanel.addEventListener('click', function(e) {
                if (e.target === creditsPanel) {
                    closeAllPanels();
                }
            });

            // --- Versions Toggle ---
            const versionsBtn = document.getElementById('versions-btn');
            const versionsPanel = document.getElementById('versions-panel');
            const closeVersions = document.getElementById('close-versions');

            versionsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                closeAllPanels();
                document.body.classList.add('versions-active');
                versionsPanel.classList.add('active');
            });

            closeVersions.addEventListener('click', closeAllPanels);

            versionsPanel.addEventListener('click', function(e) {
                if (e.target === versionsPanel) {
                    closeAllPanels();
                }
            });

            // Fix downloads on version page - using the exact same method as index.html
            document.querySelectorAll('.download-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    console.log('Download clicked:', this.href);
                    
                    const url = this.href;
                    const filename = url.split('/').pop();
                    
                    // For external URLs (like GitHub), we need to handle them differently
                    if (url.startsWith('http') && !url.includes(window.location.hostname)) {
                        // External URL - open in new tab for download
                        window.open(url, '_blank');
                    } else {
                        // Internal URL - use the download attribute method
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = filename;
                        a.style.display = 'none';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                    }
                    
                    return false;
                });
            });
            
            // Also prevent clicks inside version items from closing the panel
            document.querySelectorAll('.version-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            });
        });
    </script>
</body>
</html>